extends ../layout

block content
  .container
    .row
      include ../../includes/logo-top
      .col-sm-12.col-md-8.col-md-offset-4.pull-left.mmmain
        a(href="/books/new") Add a Book
        hr  
        h1 Books
        hr  
        if books
          .col-md-12
            for book in books
              .bbbook
                .col-md-4.pull-left
                  p
                    img(src="#{book.cover_url}" alt="#{book.title} cover" width="100%")
                .col-md-8.pull-left      
                  p
                    h3  
                      a(href="/books/#{book.id}") #{book.title}      
                  p
                    if authors
                      span(style=(book.author_id_1 ? "display: inline-block" : "display: none"))
                        | By 
                        for author in authors
                          if author.id === book.author_id_1
                            a(href="/authors/#{book.author_id_1}") #{author.firstname} #{author.lastname}
                      span(style=(book.author_id_2 ? "display: inline-block" : "display: none"))
                        | , 
                        for author in authors
                          if author.id === book.author_id_2
                            a(href="/authors/#{book.author_id_2}") #{author.firstname} #{author.lastname}
                      span(style=(book.author_id_3 ? "display: inline-block" : "display: none"))
                        | ,  
                        for author in authors
                          if author.id === book.author_id_3
                            a(href="/authors/#{book.author_id_3}") #{author.firstname} #{author.lastname}
                  h5 #{book.genre} 
                  p  
                    | #{book.description}
              hr      

              //- if book.author_id_1 === !null
